<h1>Worklogs</h1>

<%= form_with url: worklogs_path, method: :get, local: true do %>
  <%= date_field_tag :start_date, params[:start_date] %>
  <%= date_field_tag :end_date, params[:end_date] %>
  <%= submit_tag "Filter by Date" %>
<% end %>

<table>
  <thead>
    <tr>
      <th>User</th>
      <th>Date</th>
      <th>Hour</th>
      <th>Note</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @worklogs.each do |worklog| %>
      <% row_class = '' %>
      <% if worklog.hour < worklog.user.preferred_working_hour_per_day %>
        <% row_class = 'red-row' %>
      <% else if worklog.hour > worklog.user.preferred_working_hour_per_day %>
        <% row_class = 'green-row' %>
      <% end %>
      <tr class="<%= row_class %>">
        <td><%= worklog.user.name %></td>
        <td><%= worklog.date.to_s %></td>
        <td><%= worklog.hours %></td>
        <td><%= worklog.note %></td>
        <td><%= link_to 'Show', worklog %></td>
        <td><%= link_to 'Edit', edit_worklog_path(worklog) %></td>
        <td><%= link_to 'Destroy', worklog, method: :delet, data: { confirm: 'Are you sure?'} %></td>
      </tr>
    <% end %>
  </tbody>
</table>
